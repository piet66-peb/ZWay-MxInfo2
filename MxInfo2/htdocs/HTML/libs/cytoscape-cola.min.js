(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==='object'&&typeof module==='object')
module.exports=factory(require("webcola"));else if(typeof define==='function'&&define.amd)
define(["webcola"],factory);else if(typeof exports==='object')
exports["cytoscapeCola"]=factory(require("webcola"));else
root["cytoscapeCola"]=factory(root["webcola"]);})(this,function(__WEBPACK_EXTERNAL_MODULE_4__){return(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports;}
var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.i=function(value){return value;};__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter});}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default'];}:function getModuleExports(){return module;};__webpack_require__.d(getter,'a',getter);return getter;};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=3);})
([(function(module,exports,__webpack_require__){"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj;}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};var assign=__webpack_require__(1);var defaults=__webpack_require__(2);var cola=__webpack_require__(4)||(typeof window!=='undefined'?window.cola:null);var raf=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame;var isString=function isString(o){return(typeof o==='undefined'?'undefined':_typeof(o))===_typeof('');};var isNumber=function isNumber(o){return(typeof o==='undefined'?'undefined':_typeof(o))===_typeof(0);};var isObject=function isObject(o){return o!=null&&(typeof o==='undefined'?'undefined':_typeof(o))===_typeof({});};var isFunction=function isFunction(o){return o!=null&&(typeof o==='undefined'?'undefined':_typeof(o))===_typeof(function(){});};var nop=function nop(){};var getOptVal=function getOptVal(val,ele){if(isFunction(val)){var fn=val;return fn.apply(ele,[ele]);}else{return val;}};function ColaLayout(options){this.options=assign({},defaults,options);}
ColaLayout.prototype.run=function(){var layout=this;var options=this.options;layout.manuallyStopped=false;var cy=options.cy;var eles=options.eles;var nodes=eles.nodes();var edges=eles.edges();var ready=false;var bb=options.boundingBox||{x1:0,y1:0,w:cy.width(),h:cy.height()};if(bb.x2===undefined){bb.x2=bb.x1+bb.w;}
if(bb.w===undefined){bb.w=bb.x2-bb.x1;}
if(bb.y2===undefined){bb.y2=bb.y1+bb.h;}
if(bb.h===undefined){bb.h=bb.y2-bb.y1;}
var updateNodePositions=function updateNodePositions(){for(var i=0;i<nodes.length;i++){var node=nodes[i];var dimensions=node.layoutDimensions(options);var scratch=node.scratch('cola');if(!scratch.updatedDims){var padding=getOptVal(options.nodeSpacing,node);scratch.width=dimensions.w+2*padding;scratch.height=dimensions.h+2*padding;}}
nodes.positions(function(node,i){if(isNumber(node)){node=i;}
var scratch=node.scratch().cola;var retPos=void 0;if(!node.grabbed()&&!node.isParent()){retPos={x:bb.x1+scratch.x,y:bb.y1+scratch.y};if(!isNumber(retPos.x)||!isNumber(retPos.y)){retPos=undefined;}}
return retPos;});nodes.updateCompoundBounds();if(!ready){onReady();ready=true;}
if(options.fit){cy.fit(options.padding);}};var onDone=function onDone(){if(options.ungrabifyWhileSimulating){grabbableNodes.grabify();}
cy.off('destroy',destroyHandler);nodes.off('grab free position',grabHandler);nodes.off('lock unlock',lockHandler);layout.one('layoutstop',options.stop);layout.trigger({type:'layoutstop',layout:layout});};var onReady=function onReady(){layout.one('layoutready',options.ready);layout.trigger({type:'layoutready',layout:layout});};var ticksPerFrame=options.refresh;if(options.refresh<0){ticksPerFrame=1;}else{ticksPerFrame=Math.max(1,ticksPerFrame);}
var adaptor=layout.adaptor=cola.adaptor({trigger:function trigger(e){var TICK=cola.EventType?cola.EventType.tick:null;var END=cola.EventType?cola.EventType.end:null;switch(e.type){case 'tick':case TICK:if(options.animate){updateNodePositions();}
break;case 'end':case END:updateNodePositions();if(!options.infinite){onDone();}
break;}},kick:function kick(){var inftick=function inftick(){if(layout.manuallyStopped){onDone();return true;}
var ret=adaptor.tick();if(ret&&options.infinite){adaptor.resume();}
return ret;};var multitick=function multitick(){var ret=void 0;for(var i=0;i<ticksPerFrame&&!ret;i++){ret=ret||inftick();}
return ret;};if(options.animate){var frame=function frame(){if(multitick()){return;}
raf(frame);};raf(frame);}else{while(!inftick()){}}},on:nop,drag:nop});layout.adaptor=adaptor;var grabbableNodes=nodes.filter(':grabbable');if(options.ungrabifyWhileSimulating){grabbableNodes.ungrabify();}
var destroyHandler=void 0;cy.one('destroy',destroyHandler=function destroyHandler(){layout.stop();});var grabHandler=void 0;nodes.on('grab free position',grabHandler=function grabHandler(e){var node=this;var scrCola=node.scratch().cola;var pos=node.position();var nodeIsTarget=e.cyTarget===node||e.target===node;if(!nodeIsTarget){return;}
switch(e.type){case 'grab':adaptor.dragstart(scrCola);break;case 'free':adaptor.dragend(scrCola);break;case 'position':if(scrCola.px!==pos.x-bb.x1||scrCola.py!==pos.y-bb.y1){scrCola.px=pos.x-bb.x1;scrCola.py=pos.y-bb.y1;}
break;}});var lockHandler=void 0;nodes.on('lock unlock',lockHandler=function lockHandler(){var node=this;var scrCola=node.scratch().cola;scrCola.fixed=node.locked();if(node.locked()){adaptor.dragstart(scrCola);}else{adaptor.dragend(scrCola);}});var nonparentNodes=nodes.stdFilter(function(node){return!node.isParent();});adaptor.nodes(nonparentNodes.map(function(node,i){var padding=getOptVal(options.nodeSpacing,node);var pos=node.position();var dimensions=node.layoutDimensions(options);var struct=node.scratch().cola={x:options.randomize||pos.x===undefined?Math.round(Math.random()*bb.w):pos.x,y:options.randomize||pos.y===undefined?Math.round(Math.random()*bb.h):pos.y,width:dimensions.w+2*padding,height:dimensions.h+2*padding,index:i,fixed:node.locked()};return struct;}));if(options.alignment){var offsetsX=[];var offsetsY=[];nonparentNodes.forEach(function(node){var align=getOptVal(options.alignment,node);var scrCola=node.scratch().cola;var index=scrCola.index;if(!align){return;}
if(align.x!=null){offsetsX.push({node:index,offset:align.x});}
if(align.y!=null){offsetsY.push({node:index,offset:align.y});}});var constraints=[];if(offsetsX.length>0){constraints.push({type:'alignment',axis:'x',offsets:offsetsX});}
if(offsetsY.length>0){constraints.push({type:'alignment',axis:'y',offsets:offsetsY});}
adaptor.constraints(constraints);}
adaptor.groups(nodes.stdFilter(function(node){return node.isParent();}).map(function(node,i){var optPadding=getOptVal(options.nodeSpacing,node);var getPadding=function getPadding(d){return parseFloat(node.style('padding-'+d));};var pleft=getPadding('left')+optPadding;var pright=getPadding('right')+optPadding;var ptop=getPadding('top')+optPadding;var pbottom=getPadding('bottom')+optPadding;node.scratch().cola={index:i,padding:Math.max(pleft,pright,ptop,pbottom),leaves:node.children().stdFilter(function(child){return!child.isParent();}).map(function(child){return child[0].scratch().cola.index;}),fixed:node.locked()};return node;}).map(function(node){node.scratch().cola.groups=node.children().stdFilter(function(child){return child.isParent();}).map(function(child){return child.scratch().cola.index;});return node.scratch().cola;}));var length=void 0;var lengthFnName=void 0;if(options.edgeLength!=null){length=options.edgeLength;lengthFnName='linkDistance';}else if(options.edgeSymDiffLength!=null){length=options.edgeSymDiffLength;lengthFnName='symmetricDiffLinkLengths';}else if(options.edgeJaccardLength!=null){length=options.edgeJaccardLength;lengthFnName='jaccardLinkLengths';}else{length=100;lengthFnName='linkDistance';}
var lengthGetter=function lengthGetter(link){return link.calcLength;};adaptor.links(edges.stdFilter(function(edge){return!edge.source().isParent()&&!edge.target().isParent();}).map(function(edge){var c=edge.scratch().cola={source:edge.source()[0].scratch().cola.index,target:edge.target()[0].scratch().cola.index};if(length!=null){c.calcLength=getOptVal(length,edge);}
return c;}));adaptor.size([bb.w,bb.h]);if(length!=null){adaptor[lengthFnName](lengthGetter);}
if(options.flow){var flow=void 0;var defAxis='y';var defMinSep=50;if(isString(options.flow)){flow={axis:options.flow,minSeparation:defMinSep};}else if(isNumber(options.flow)){flow={axis:defAxis,minSeparation:options.flow};}else if(isObject(options.flow)){flow=options.flow;flow.axis=flow.axis||defAxis;flow.minSeparation=flow.minSeparation!=null?flow.minSeparation:defMinSep;}else{flow={axis:defAxis,minSeparation:defMinSep};}
adaptor.flowLayout(flow.axis,flow.minSeparation);}
layout.trigger({type:'layoutstart',layout:layout});adaptor.avoidOverlaps(options.avoidOverlap).handleDisconnected(options.handleDisconnected).start(options.unconstrIter,options.userConstIter,options.allConstIter);if(!options.infinite){setTimeout(function(){if(!layout.manuallyStopped){adaptor.stop();}},options.maxSimulationTime);}
return this;};ColaLayout.prototype.stop=function(){if(this.adaptor){this.manuallyStopped=true;this.adaptor.stop();}
return this;};module.exports=ColaLayout;}),(function(module,exports,__webpack_require__){"use strict";module.exports=Object.assign!=null?Object.assign.bind(Object):function(tgt){for(var _len=arguments.length,srcs=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){srcs[_key-1]=arguments[_key];}
srcs.forEach(function(src){Object.keys(src).forEach(function(k){return tgt[k]=src[k];});});return tgt;};}),(function(module,exports,__webpack_require__){"use strict";var defaults={animate:true,refresh:1,maxSimulationTime:4000,ungrabifyWhileSimulating:false,fit:true,padding:30,boundingBox:undefined,nodeDimensionsIncludeLabels:undefined,ready:function ready(){},stop:function stop(){},randomize:false,avoidOverlap:true,handleDisconnected:true,nodeSpacing:function nodeSpacing(node){return 10;},flow:undefined,alignment:undefined,edgeLength:undefined,edgeSymDiffLength:undefined,edgeJaccardLength:undefined,unconstrIter:undefined,userConstIter:undefined,allConstIter:undefined,infinite:false};module.exports=defaults;}),(function(module,exports,__webpack_require__){"use strict";var impl=__webpack_require__(0);var register=function register(cytoscape){if(!cytoscape){return;}
cytoscape('layout','cola',impl);};if(typeof cytoscape!=='undefined'){register(cytoscape);}
module.exports=register;}),(function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_4__;})]);});